<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Gastos</title>
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/filterMenu.css">
</head>

<body>

    <div id="sidebar">
        <h2>Empresas</h2>
        <ul>
            <!-- Las empresas se cargarán aquí desde la API -->
            <li>Empresa 1</li>
            <li>Empresa 2</li>
            <li>Empresa 3</li>
        </ul>
        <div id="theme-toggle-wrapper">
            <input type="checkbox" id="theme-checkbox">
            <label for="theme-checkbox"></label>
        </div>

        <div id="toggle-buttons">
            <button id="collapse-btn">&lt;&lt;</button>
            <button id="expand-btn" style="display: none;">&gt;&gt;</button>
        </div>
    </div>

    <div id="main-content">
        <h1>Hojas de Gastos</h1>

        <div id="main-header">
            <div>
                <button>Generar Fichero 1</button>
                <button>Generar Fichero 2</button>
            </div>
            <div>
                <button id="filter-btn">Filtros</button>
                <div id="filter-menu">
                    <form id="filter-form">
                        <h3>Filtrar Gastos</h3>

                        <div class="filter-group">
                            <label for="filtro-propietario">Propietario</label>
                            <input type="text" id="filtro-propietario" placeholder="Ej. Juan Pérez">
                        </div>

                        <div class="filter-group">
                            <label for="filtro-estado">Estado</label>
                            <select id="filtro-estado">
                                <option value="">Todos</option>
                                <option value="aprobado">Aprobado</option>
                                <option value="pendiente">Pendiente</option>
                                <option value="rechazado">Rechazado</option>
                            </select>
                        </div>

                        <label>Importe (€)</label>
                        <div class="filter-row">
                            <div class="input-wrapper">
                                <span class="sub-label">Desde</span>
                                <input type="number" id="filtro-importe-desde" placeholder="Ej. 0">
                            </div>

                            <div class="input-wrapper">
                                <span class="sub-label">Hasta</span>
                                <input type="number" id="filtro-importe-hasta" placeholder="Ej. 200">
                            </div>
                        </div>

                        <label>Fecha</label>
                        <div class="filter-row">
                            <div class="input-wrapper">
                                <span class="sub-label">Desde</span>
                                <input type="date" id="filtro-fecha-desde" placeholder="Seleccionar">
                            </div>

                            <div class="input-wrapper">
                                <span class="sub-label">Hasta</span>
                                <input type="date" id="filtro-fecha-hasta" placeholder="Seleccionar">
                            </div>
                        </div>

                        <div class="filter-actions">
                            <button type="button" id="btn-borrar-filtros" class="btn-outlined">Limpiar</button>
                            <button type="button" id="btn-aplicar-filtros">Filtrar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th><input type="checkbox" id="select-all"></th>
                    <th>Empresa</th>
                    <th>Propietario</th>
                    <th>Fecha</th>
                    <th>Importe</th>
                    <th>Estado</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="expenses-table-body">
                <!-- Fila de ejemplo 1 -->
                <tr>
                    <td><input type="checkbox" class="expense-checkbox"></td>
                    <td>Empresa 1</td>
                    <td>Juan Pérez</td>
                    <td>2024-05-20</td>
                    <td>150.00€</td>
                    <td>Aprobado</td>
                    <td>
                        <button class="expand-expenses-btn">▼</button>
                    </td>
                </tr>
                <tr class="expenses-row">
                    <td colspan="7">
                        <div class="sub-table-wrapper">
                            <table class="sub-table">
                                <thead>
                                    <tr>
                                        <th>Concepto</th>
                                        <th>Fecha</th>
                                        <th>Cantidad</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Taxi Aeropuerto</td>
                                        <td>2024-05-19</td>
                                        <td>50.00€</td>
                                    </tr>
                                    <tr>
                                        <td>Cena Cliente</td>
                                        <td>2024-05-19</td>
                                        <td>100.00€</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>
                <!-- Fila de ejemplo 2 -->
                <tr>
                    <td><input type="checkbox" class="expense-checkbox"></td>
                    <td>Empresa 2</td>
                    <td>Ana López</td>
                    <td>2024-05-22</td>
                    <td>250.00€</td>
                    <td>Pendiente</td>
                    <td>
                        <button class="expand-expenses-btn">▼</button>
                    </td>
                </tr>
                <tr class="expenses-row">
                    <td colspan="7">
                        <div class="sub-table-wrapper">
                            <table class="sub-table">
                                <thead>
                                    <tr>
                                        <th>Concepto</th>
                                        <th>Fecha</th>
                                        <th>Cantidad</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Taxi Aeropuerto</td>
                                        <td>2024-05-19</td>
                                        <td>50.00€</td>
                                    </tr>
                                    <tr>
                                        <td>Cena Cliente</td>
                                        <td>2024-05-19</td>
                                        <td>100.00€</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="system-message-popup" class="message-popup" style="display: none;">
        <div class="popup-header">
            <span>Registro de Actividad</span>
            <button id="btn-close-popup" title="Cerrar y Limpiar">✕</button>
        </div>
        <div id="popup-content-area">
            </div>
    </div>

    <script src="../js/script.js"></script>
    <script src="../js/filtros.js"></script>
    <script src="../js/errors.js"></script>

</body>

</html>